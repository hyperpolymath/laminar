// SPDX-License-Identifier: Apache-2.0
// SPDX-FileCopyrightText: 2025 Laminar Contributors

= Laminar: High-Velocity Cloud Streaming Relay
:toc: left
:toclevels: 3
:icons: font
:source-highlighter: rouge

== Overview

Laminar is a cloud-to-cloud streaming relay that transfers data between cloud storage providers (Dropbox, Google Drive, S3, etc.) without downloading files to local persistent storage.

=== Current Status: v1.2.0

[IMPORTANT]
====
**Honest Assessment**: Laminar v1.2.0 contains both working code and aspirational architecture. See link:TRIAL_AND_ERROR.adoc[TRIAL_AND_ERROR.adoc] for what works, what doesn't, and what was learned.

**What Actually Works**:

* `orchestrator.ex` - Main API, actually usable
* `transfer_progress.ex` - Vuze-style progress tracking
* `rclone_client.ex` - Core rclone RC API integration
* `declarative.ex` - Cruft detection (file traversal parts)

**What's Aspirational (Not Functional)**:

* GPU/DPDK/io_uring acceleration (would need NIFs)
* Multi-protocol swarming (Google Drive only speaks HTTPS)
* Shamir secret sharing (crypto implementation is wrong)
====

== Quick Start (Actually Works)

[source,bash]
----
# Simple transfer - this is what you probably want
Laminar.Orchestrator.transfer("dropbox:Photos", "gdrive:backup/Photos")

# Or just use rclone directly (equally effective)
rclone copy dropbox:Photos gdrive:backup/Photos --progress
----

== Architecture

[source]
----
┌─────────────┐     ┌────────────────────────────────────┐     ┌─────────────┐
│   Dropbox   │────▶│          LAMINAR RELAY             │────▶│Google Drive │
│   (Source)  │     │                                    │     │   (Dest)    │
└─────────────┘     │  ┌──────────────────────────────┐  │     └─────────────┘
                    │  │ Orchestrator (GenServer)     │  │
                    │  │   └── TransferProgress       │  │
                    │  │   └── RcloneClient           │  │
                    │  └──────────────────────────────┘  │
                    │                 │                  │
                    │  ┌──────────────────────────────┐  │
                    │  │ Rclone RC API (localhost)    │  │
                    │  │   └── Actually does transfer │  │
                    │  └──────────────────────────────┘  │
                    └────────────────────────────────────┘
----

== Modules

=== Working (Use These)

[cols="1,3"]
|===
| Module | Purpose

| `orchestrator.ex`
| Main API - call `Laminar.Orchestrator.transfer/3`

| `transfer_progress.ex`
| EMA-smoothed progress tracking like Vuze/Azureus

| `rclone_client.ex`
| HTTP client for rclone RC API

| `declarative.ex`
| Cruft detection, config templating concepts
|===

=== Experimental (May Not Work)

[cols="1,3"]
|===
| Module | Issue

| `accelerator.ex`
| Flag generation OK, actual acceleration untested

| `transport.ex`
| Verification sampling concept OK, crypto needs work

| `supply_chain.ex`
| Good ideas, not wired to anything
|===

=== Aspirational (Don't Expect These to Work)

[cols="1,3"]
|===
| Module | Why It's Broken

| `hyperaccel.ex`
| GPU/DPDK/io_uring need C NIFs, not pure Elixir

| `multiprotocol.ex`
| Google Drive doesn't speak FTP/Gopher/NNTP

| `pathfinder.ex`
| Shamir implementation is mathematically wrong

| `benchmarks.ex`
| Just documentation, no actual benchmarking code
|===

== Configuration

See `config/config.json` for runtime configuration.

== What We Learned

See link:TRIAL_AND_ERROR.adoc[TRIAL_AND_ERROR.adoc] for a detailed post-mortem of what worked and what didn't.

== License

Apache-2.0. See link:LICENSE.txt[LICENSE.txt] for details.
